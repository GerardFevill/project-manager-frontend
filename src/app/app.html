<mat-sidenav-container class="sidenav-container">
  <!-- Sidebar -->
  <mat-sidenav
    #sidenav
    mode="side"
    [opened]="sidenavOpened()"
    class="sidenav"
    [class.collapsed]="!sidenavOpened()"
  >
    <!-- Sidebar Header -->
    <div class="sidenav-header">
      <button mat-icon-button (click)="toggleSidenav()" [matTooltip]="sidenavOpened() ? 'RÃ©duire le menu' : 'Ouvrir le menu'">
        <mat-icon>menu</mat-icon>
      </button>
      @if (sidenavOpened()) {
        <h2 class="sidenav-title">Project Manager</h2>
      }
    </div>

    <!-- Navigation Menu - Jira Style -->
    <mat-nav-list class="nav-list">
      <!-- PLANNING Section -->
      @if (sidenavOpened()) {
        <div class="nav-section-header">PLANNING</div>
      }

      <a mat-list-item routerLink="/kanban" routerLinkActive="active-link" [matTooltip]="!sidenavOpened() ? 'Board' : ''" matTooltipPosition="right" class="nav-item">
        <mat-icon matListItemIcon>view_kanban</mat-icon>
        @if (sidenavOpened()) {
          <span matListItemTitle>Board</span>
        }
      </a>

      <a mat-list-item routerLink="/sprint-planning" routerLinkActive="active-link" [matTooltip]="!sidenavOpened() ? 'Backlog' : ''" matTooltipPosition="right" class="nav-item">
        <mat-icon matListItemIcon>inventory_2</mat-icon>
        @if (sidenavOpened()) {
          <span matListItemTitle>Backlog</span>
        }
      </a>

      <a mat-list-item routerLink="/calendar" routerLinkActive="active-link" [matTooltip]="!sidenavOpened() ? 'Timeline' : ''" matTooltipPosition="right" class="nav-item">
        <mat-icon matListItemIcon>timeline</mat-icon>
        @if (sidenavOpened()) {
          <span matListItemTitle>Timeline</span>
        }
      </a>

      <a mat-list-item routerLink="/analytics" routerLinkActive="active-link" [matTooltip]="!sidenavOpened() ? 'Reports' : ''" matTooltipPosition="right" class="nav-item">
        <mat-icon matListItemIcon>assessment</mat-icon>
        @if (sidenavOpened()) {
          <span matListItemTitle>Reports</span>
        }
      </a>

      <mat-divider></mat-divider>

      <!-- WORK Section -->
      @if (sidenavOpened()) {
        <div class="nav-section-header">WORK</div>
      }

      <a mat-list-item routerLink="/tasks" routerLinkActive="active-link" [matTooltip]="!sidenavOpened() ? 'Your work' : ''" matTooltipPosition="right" class="nav-item">
        <mat-icon matListItemIcon>checklist</mat-icon>
        @if (sidenavOpened()) {
          <span matListItemTitle>Your work</span>
        }
      </a>

      <a mat-list-item routerLink="/projects" routerLinkActive="active-link" [matTooltip]="!sidenavOpened() ? 'Projects' : ''" matTooltipPosition="right" class="nav-item">
        <mat-icon matListItemIcon>folder_open</mat-icon>
        @if (sidenavOpened()) {
          <span matListItemTitle>Projects</span>
        }
      </a>

      <a mat-list-item routerLink="/analytics" routerLinkActive="active-link" [matTooltip]="!sidenavOpened() ? 'Dashboards' : ''" matTooltipPosition="right" class="nav-item">
        <mat-icon matListItemIcon>dashboard</mat-icon>
        @if (sidenavOpened()) {
          <span matListItemTitle>Dashboards</span>
        }
      </a>

      <mat-divider></mat-divider>

      <!-- PEOPLE Section -->
      @if (sidenavOpened()) {
        <div class="nav-section-header">PEOPLE</div>
      }

      <a mat-list-item routerLink="/team" routerLinkActive="active-link" [matTooltip]="!sidenavOpened() ? 'Team' : ''" matTooltipPosition="right" class="nav-item">
        <mat-icon matListItemIcon>groups</mat-icon>
        @if (sidenavOpened()) {
          <span matListItemTitle>Team</span>
        }
      </a>

      <mat-divider></mat-divider>

      <!-- APPS Section -->
      @if (sidenavOpened()) {
        <div class="nav-section-header">APPS</div>
      }

      <a mat-list-item routerLink="/apps" routerLinkActive="active-link" [matTooltip]="!sidenavOpened() ? 'Apps' : ''" matTooltipPosition="right" class="nav-item">
        <mat-icon matListItemIcon>apps</mat-icon>
        @if (sidenavOpened()) {
          <span matListItemTitle>Apps</span>
        }
      </a>

      <mat-divider></mat-divider>

      <!-- PROJECT SETTINGS Section -->
      @if (sidenavOpened()) {
        <div class="nav-section-header">PROJECT SETTINGS</div>
      }

      <a mat-list-item routerLink="/settings/details" routerLinkActive="active-link" [matTooltip]="!sidenavOpened() ? 'Details' : ''" matTooltipPosition="right" class="nav-item">
        <mat-icon matListItemIcon>info</mat-icon>
        @if (sidenavOpened()) {
          <span matListItemTitle>Details</span>
        }
      </a>

      <a mat-list-item routerLink="/settings/access" routerLinkActive="active-link" [matTooltip]="!sidenavOpened() ? 'Access' : ''" matTooltipPosition="right" class="nav-item">
        <mat-icon matListItemIcon>lock</mat-icon>
        @if (sidenavOpened()) {
          <span matListItemTitle>Access</span>
        }
      </a>

      <a mat-list-item routerLink="/settings/features" routerLinkActive="active-link" [matTooltip]="!sidenavOpened() ? 'Features' : ''" matTooltipPosition="right" class="nav-item">
        <mat-icon matListItemIcon>extension</mat-icon>
        @if (sidenavOpened()) {
          <span matListItemTitle>Features</span>
        }
      </a>
    </mat-nav-list>

    <!-- Sidebar Footer -->
    <div class="sidenav-footer">
      <button mat-button class="user-profile" [matTooltip]="!sidenavOpened() ? 'Mon Compte' : ''" matTooltipPosition="right">
        <mat-icon>account_circle</mat-icon>
        @if (sidenavOpened()) {
          <span>Mon Compte</span>
        }
      </button>
    </div>
  </mat-sidenav>

  <!-- Main Content -->
  <mat-sidenav-content class="main-content">
    <!-- Top Toolbar - Jira Style -->
    <mat-toolbar class="toolbar">
      <button
        mat-icon-button
        (click)="toggleSidenav()"
        matTooltip="Menu"
        class="menu-toggle"
      >
        <mat-icon>menu</mat-icon>
      </button>

      <!-- Search Bar -->
      <div class="toolbar-search">
        <mat-icon class="search-icon">search</mat-icon>
        <input
          type="text"
          placeholder="Search..."
          class="search-input"
        />
      </div>

      <span class="toolbar-spacer"></span>

      <!-- Create Button -->
      <button
        mat-raised-button
        color="primary"
        class="create-button"
        routerLink="/tasks/new"
      >
        <mat-icon>add</mat-icon>
        Create
      </button>

      <!-- Notifications -->
      <button
        mat-icon-button
        matTooltip="Notifications"
        class="toolbar-icon"
      >
        <mat-icon>notifications_none</mat-icon>
      </button>

      <!-- Help -->
      <button
        mat-icon-button
        matTooltip="Help"
        class="toolbar-icon"
      >
        <mat-icon>help_outline</mat-icon>
      </button>

      <!-- Dark Mode Toggle -->
      <button
        mat-icon-button
        (click)="toggleDarkMode()"
        [matTooltip]="isDarkMode() ? 'Light mode' : 'Dark mode'"
        class="toolbar-icon"
      >
        @if (isDarkMode()) {
          <mat-icon>light_mode</mat-icon>
        } @else {
          <mat-icon>dark_mode</mat-icon>
        }
      </button>

      <!-- Profile Menu -->
      <button
        mat-icon-button
        [matMenuTriggerFor]="profileMenu"
        class="toolbar-icon profile-button"
      >
        <mat-icon>account_circle</mat-icon>
      </button>

      <mat-menu #profileMenu="matMenu" class="profile-menu">
        <div class="profile-header">
          <mat-icon>account_circle</mat-icon>
          <div class="profile-info">
            <span class="profile-name">John Doe</span>
            <span class="profile-email">john.doe@example.com</span>
          </div>
        </div>
        <mat-divider></mat-divider>
        <button mat-menu-item routerLink="/settings">
          <mat-icon>person</mat-icon>
          <span>Profile</span>
        </button>
        <button mat-menu-item routerLink="/settings">
          <mat-icon>settings</mat-icon>
          <span>Settings</span>
        </button>
        <mat-divider></mat-divider>
        <button mat-menu-item>
          <mat-icon>logout</mat-icon>
          <span>Log out</span>
        </button>
      </mat-menu>
    </mat-toolbar>

    <!-- Page Content -->
    <div class="page-content">
      <router-outlet />
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
